<!doctype html>
<html class="no-js" lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Managing Application Settings in PHP</title>
	<link rel="stylesheet" href="/assets/css/styles_feeling_responsive.css">

    <link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/styles_feeling_responsive.css">

  

	<script src="http://localhost:4000/assets/js/modernizr.min.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
	<script>
		WebFont.load({
			google: {
				families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ]
			}
		});
	</script>

	<noscript>
		<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic%7CVolkhov' rel='stylesheet' type='text/css'>
	</noscript>


	<!-- Search Engine Optimization -->
	<meta name="description" content="There are multiple ways to save application settings/configurations in PHP. You can save them in INI, XML or PHP files as well as a database table. I prefer a combination of the latter two; saving">
	<meta name="google-site-verification" content="Vk0IOJ2jwG_qEoG7fuEXYqv0m2rLa8P778Fi_GrsgEQ">
	<meta name="msvalidate.01" content="0FB4C028ABCF07C908C54386ABD2D97F" >
	
	
	
	<link rel="canonical" href="http://localhost:4000/2012/03/managing-application-settings-in-php/">


	<!-- Facebook Open Graph -->
	<meta property="og:title" content="Managing Application Settings in PHP">
	<meta property="og:description" content="There are multiple ways to save application settings/configurations in PHP. You can save them in INI, XML or PHP files as well as a database table. I prefer a combination of the latter two; saving">
	<meta property="og:url" content="http://localhost:4000/2012/03/managing-application-settings-in-php/">
	<meta property="og:locale" content="en_EN">
	<meta property="og:type" content="website">
	<meta property="og:site_name" content="Amged Rustom">
	
	<meta property="article:author" content="https://www.facebook.com/phlow.media">


	
	<!-- Twitter -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="phlow">
	<meta name="twitter:creator" content="phlow">
	<meta name="twitter:title" content="Managing Application Settings in PHP">
	<meta name="twitter:description" content="There are multiple ways to save application settings/configurations in PHP. You can save them in INI, XML or PHP files as well as a database table. I prefer a combination of the latter two; saving">
	
	

	<link type="text/plain" rel="author" href="http://localhost:4000/humans.txt">

	

	<!-- 

	<link rel="icon" sizes="32x32" href="http://localhost:4000/assets/img//images/avatar.png">

	<link rel="icon" sizes="192x192" href="http://localhost:4000/assets/img/touch-icon-192x192.png">

	<link rel="apple-touch-icon-precomposed" sizes="180x180" href="http://localhost:4000/assets/img/apple-touch-icon-180x180-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://localhost:4000/assets/img/apple-touch-icon-152x152-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/assets/img/apple-touch-icon-144x144-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://localhost:4000/assets/img/apple-touch-icon-120x120-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/assets/img/apple-touch-icon-114x114-precomposed.png">

	
	<link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://localhost:4000/assets/img/apple-touch-icon-76x76-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/assets/img/apple-touch-icon-72x72-precomposed.png">

	<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/assets/img/apple-touch-icon-precomposed.png">	

	<meta name="msapplication-TileImage" content="http://localhost:4000/assets/img/msapplication_tileimage.png">

	<meta name="msapplication-TileColor" content="#fabb00">
	 -->

		
	<link rel="icon"  sizes="32x32" href="http://localhost:4000/images/avatar.png/images/avatar.png">
	

	

	


</head>
<body id="top-of-page" class="post">
	
	
<div id="navigation" class="sticky">
  <nav class="top-bar" role="navigation" data-topbar data-options="scrolltop: false">
    <ul class="title-area">
      <li class="name">
      <h1 class="hide-for-large-up"><a href="http://localhost:4000" class="icon-tree"> Amged Rustom</a></h1>
    </li>
       <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
      <li class="toggle-topbar toggle-topbar-click menu-icon"><a><span>Nav</span></a></li>
    </ul>
    <section class="top-bar-section">

      <ul class="left">
        

              

          
          

            
            
              <li><a  href="http://localhost:4000/">Home</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            
              <li><a  href="http://localhost:4000/about/">About</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            
              <li><a  href="http://localhost:4000/blog/">Blog</a></li>
              <li class="divider"></li>

            
            
          
        
        
      </ul>
      
      

      <ul class="right">
        <li class="divider"></li>
        <li>
          <div style="display: flex; align-items: center; padding: 9px;">
              <div id="moon-icon" class="icon" onclick="toggleDarkMode()" style="cursor: pointer;">
             
              <!-- Moon Icon SVG -->
                <!-- Moon icon SVG -->
                <svg width="24px" height="24px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>moon [#114]</title> <desc>Created with Sketch.</desc> <defs> </defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Dribbble-Light-Preview" transform="translate(-220.000000, -7719.000000)" fill="#000000"> <g id="icons" transform="translate(56.000000, 160.000000)"> <path d="M173.99029,7576.998 C171.388688,7576.998 169.058358,7575.74775 167.591892,7573.8028 C174.222522,7575.15916 180.17047,7569.27528 178.803103,7562.59159 C180.748048,7564.05806 181.998298,7566.38839 181.998298,7568.98999 C181.998298,7573.40541 178.405705,7576.998 173.99029,7576.998 M174.610911,7559 C176.076376,7560.36937 176.993293,7562.32032 176.993293,7564.48549 C176.993293,7571.32432 168.608909,7574.54254 164.0003,7569.60961 C164.32062,7574.84985 168.66997,7579 173.99029,7579 C179.518819,7579 184.0003,7574.51852 184.0003,7568.98999 C184.0003,7563.66967 179.85015,7559.32032 174.610911,7559" id="moon-[#114]"> </path> </g> </g> </g> </g></svg>
              
            </div>
        
            <div id="sun-icon" class="icon" onclick="toggleDarkMode()" style="cursor: pointer;">
              
              <!-- Sun Icon SVG -->
              <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#ffffff">
                <path d="M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5001M17.6859 17.69L18.5 18.5001M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
        </li>
        

              



          
          
        

              



          
          
        

              



          
          
        
        
      </ul>
      <script>
        function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
    }
      </script>
    </section>
  </nav>
</div><!-- /#navigation -->

	

	

<div id="masthead">
	<div class="row">
		<div class="small-12 columns">
			<a id="logo" href="http://localhost:4000/" title="Amged Rustom – A Flexible Theme for Jekyll">
				<img src="http://localhost:4000/assets/img/logo.png"
					alt="Amged Rustom – A Flexible Theme for Jekyll">
			</a>
		</div><!-- /.small-12.columns -->
	</div><!-- /.row -->
</div><!-- /#masthead -->







	<div class="row t30">
	<div class="medium-8 columns medium-offset-2 end">
		<article itemscope itemtype="http://schema.org/Article">
			<header>
				

				<div itemprop="name">
					
					<h1>Managing Application Settings in PHP</h1>
				</div>
			</header>
		
			<div itemprop="articleSection">
			<p>There are multiple ways to save application settings/configurations in PHP. You can save them in INI, XML or PHP files as well as a database table. I prefer a combination of the latter two; saving the database connection details in a PHP file and the rest in a database table.</p>

<p>The advantage of using this approach over the others will be apparent when developing downloadable scripts, as updates will not need to modify a configuration file of an already setup script.</p>

<p>To start create a table containing 3 fields: auto increment ID, setting name and setting value:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE TABLE IF NOT EXISTS `settings` (
  `setting_id` int(11) NOT NULL AUTO_INCREMENT,
  `setting` varchar(50) NOT NULL,
  `value` varchar(500) NOT NULL,
  PRIMARY KEY (`setting_id`),
  UNIQUE KEY `setting` (`setting`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;
</code></pre></div></div>
<p>The following function updates the value of a setting by supplying it with the setting name and the new value.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php
function SaveSetting($settingname, $settingvalue) {	
	mysql_query("UPDATE settings SET `value`='$settingvalue' WHERE `setting`='$settingname'");
}
?&gt;
</code></pre></div></div>
<p>The GetSetting function returns 1 or more values depending on the parameter passed. You can pass a setting name in a string or multiple settings in an array of strings. The latter will save you multiple trips to the database to perform a task that requires more than 1 setting like sending an email which needs the email server, protocol and credentials.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php
function GetSetting($settingname) {
	if(!is_array($settingname)) {   //user passed a single setting name
		$result = mysql_query("SELECT * FROM settings WHERE setting='$settingname'");
		$setting = mysql_fetch_array($result);

		if(mysql_num_rows($result)) {
			return $setting['value'];
		}
		else {
			return null;
		}
	}

	else {   //user passed multiple setting names in an array
		$params = '';
		
		for($c = 0 ; $c &lt; count($settingname) ; $c++) {		
			$params .= "setting='{$settingname[$c]}'";
			
			if($c != (count($settingname) - 1))
				$params .= ' OR ';
		}
		
		$result = mysql_query("SELECT * FROM settings WHERE " . $params);
		
		if(mysql_num_rows($result)) {
			$settings_array = array();
			
			while($setting = mysql_fetch_array($result)) {
				$settings_array[$setting['setting']] = $setting['value'];
			}
			
			return $settings_array;
		}
		else {
			return null;
		}

	}
}
?&gt;
</code></pre></div></div>
<p>Here is an example of using the GetSetting function to initialize an email object.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php
$setting = GetSetting(array('email_protocol', 'email_smtpauth', 
    'email_server', 'email_port'));

$mail = new PHPMailer();
if($setting['email_protocol'] == 1) $mail-&gt;IsSMTP();
if($setting['email_smtpauth'] == 1) $mail-&gt;SMTPAuth = true; 
$mail-&gt;Host = $setting['email_server'];
$mail-&gt;Port = $setting['email_port']; 
?&gt;
</code></pre></div></div>

<p>Please note, as Remo pointed out in his comment below, this code does not filter the values sent to SaveSetting(). To prevent SQL injection and XSS attacks please make sure you check the values before saving them and also after reading them using GetSetting().</p>

<p>That’s it. Hope you found the post useful, and feel free to comment and share tips.</p>

			</div>
			
			
						<div id="page-meta" class="t30">
				<p>
				
				<time class="icon-calendar pr20" datetime="2012-03-27T00:00:00+05:00" itemprop="datePublished"> 2012-03-27</time>
				

				<span class="icon-archive pr20"> MYSQL · PHP</span>
				<br />
				<span class="pr20"></span>
			</p>

			
			<div id="post-nav" class="row">
				
				<div class="medium-5 columns"><a class="button small radius prev" href="http://localhost:4000/2012/02/snipsmanager-version-2.3-released/">&laquo; SnipsManager Version 2.3 Released</a></div><!-- /.small-4.columns -->
				
				<!-- <div class="medium-2 columns text-center"><a class="button small radius expand" href="http://localhost:4000/blog/archive/" title="Blog Archive">Archive</a></div>/.small-4.columns -->
				
				<div class="medium-5 columns text-right"><a class="button small radius next" href="http://localhost:4000/2012/07/Aa-simple-port-scanner-in-php/">A Simple Port Scanner in PHP &raquo;</a></div><!-- /.small-4.columns -->
				
			</div>
			
			</div><!--  /.page-meta -->

			

			
		</article>
	</div><!-- /.medium-8.columns -->


	


	
</div><!-- /.row -->


	
	    <div id="up-to-top" class="row">
      <div class="small-12 columns" style="text-align: right;">
        <a class="iconfont" href="#top-of-page">&#xf108;</a>
      </div><!-- /.small-12.columns -->
    </div><!-- /.row -->


    <footer id="footer-content" class="bg-grau">
      <div id="subfooter">
        <nav class="row">
          <section id="subfooter-left" class="small-12 medium-6 columns credits">
            <p>Created with &hearts; by <a href="http://phlow.de/">Phlow</a> with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> based on <a href="http://phlow.github.io/feeling-responsive/">Feeling Responsive</a>.</p>
          </section>

          <section id="subfooter-right" class="small-12 medium-6 columns">
            <ul class="inline-list social-icons">
            
              <li><a href="https://github.com/amgedr/" target="_blank" class="icon-github" title="Code und mehr..."></a></li>
            
              <li><a href="https://www.linkedin.com/in/amgedrustom/" target="_blank" class="icon-linkedin" title="Immer das Neuste von Phlow gibt es auf linkedin"></a></li>
            
              <li><a href="http://twitter.com/phlow" target="_blank" class="icon-twitter" title="Immer das Neuste von Phlow gibt es auf Twitter"></a></li>
            
              <li><a href="https://stackoverflow.com/users/1204690/amged-rustom" target="_blank" class="icon-stackoverflow" title="Immer das Neuste von Phlow gibt es auf stackoverflow"></a></li>
            
            </ul>
          </section>
        </nav>
      </div><!-- /#subfooter -->
    </footer>

	

	


<script src="http://localhost:4000/assets/js/javascript.min.js"></script>












</body>
</html>

